#　サマリ

# メモ
## データ分析の標準プロセス
- CRISP-DM(CRoss Industry Standard Process for Data Mining)(Shearer他)
> 1. ビジネス理解でビジネスにおける課題を明確にし、データ分析プロジェクトの計画を立てます。2. データ理解でデータを取得し、そのデータが分析に使える状態であるか確かめるなどして現状のデータを理解します。3. データ準備では、後続のモデリングで要求される形式にデータを整形します。4. モデリングで得た分析結果を 5. 評価し、十分な結果が出ていれば業務に分析結果を6. 適用します。

- KDD(Knowledge Discovery in Databases)(Fayyad他)
> 1. データ取得
> 2. データ選択
> 3. データクレンジング
> 4. データ変換
> 5. データマイニング
> 6. 解釈・評価

## Excel からのデータ読み込み
```
xlsx = pd.ExcelFile(ファイルパス)
df = pd.read_excel(xlsx, 対象シート)
```

## DBからのデータ読み込み
```
engine = sqla.create_engine('接続データベース+ドライバー名://接続ユーザー名:パスワード@ホスト名:ポート番号/データベース名?charset=文字コード')
print(pd.read_sql('''
SELECT
  列名1,
  列名2,
  ...
FROM テーブル名
''', engine))
```

## 欠損値が発生するパターンと対処法
- MCAR(Missing Completely At Random): 欠損確率が他の項目と無関係。
    - 誤記など
    - リストワイズ削除（NaNを含むデータを削除）か、代入法などで対処。
- MAR(Missing At Random): 欠損確率が他の項目と相関がある。
    - 性別が女性であると、体重という項目が欠損しやすい。
    - リストワイズ削除すると、相関する項目のデータに偏りが発生するので、代入法など。相関する項目から推測した代入法などで対処。
- NMAR(Not Missing At Random): 欠損確率が、その項目自体の値のみに依存する。
    - 体重という項目が、体重が重くなるほど欠損しやすい（答えてもらいづらい）
    - リストワイズ削除すると、その項目に偏りが発生する。他項目からの推測も難しいので、再収集などが必要になる、

## 欠損値の可視化
- `missingno.matrix(data)` を使えば、画像で欠損の状況を確認できる。

## 欠損値の対処
### 単一代入法(ホットデック法)
- 欠損値を含むデータ行(レシピエントと呼ぶ)の欠損値を、欠損しているそのデータ項目の値を持っている別のデータ行(ドナーと呼ぶ)の値を使って補完
- `knnimpute.knn_impute_few_observed(matrix, missing_mask, k)`
- 結果は `np.ndarray` 型になっているため、`pd.DataFrame(result, colums=)` でdfに変換
